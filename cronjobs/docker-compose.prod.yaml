services:
  # METAR Update Cronjob
  cronjob-update-metar:
    build:
      context: ..
      dockerfile: cronjobs/updateMetar/Dockerfile
    container_name: ${NAME_PREFIX:-salko}-cronjob-update-metar-${BRANCH_SUFFIX:-prod}
    networks:
      - internal_prod
    environment:
      # Database connection - will use environment-specific values from .env file
      - DATABASE_CONNECTION_STRING=${DATABASE_CONNECTION_STRING:-postgresql://salko_app:salko_app@${NAME_PREFIX:-salko}-postgres-${BRANCH_SUFFIX:-prod}:5432/salko}
    restart: "no" # Cronjobs should not restart automatically

networks:
  internal_prod:
    external: true
    name: salko_prod_internal
